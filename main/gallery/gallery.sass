// TODO: 3 item rows with 4px or 8px between them
div#home.gallery-page
	div#images_container

		&[class="theater"]
			filter: brightness(0.20) blur(1px) sepia(1)

		&:not([class="theater"])
			& > div.year > div.grid > div.row > img
				margin-top: 0
				margin-bottom: 3px
				cursor: pointer
				transition: opacity 100ms

				&:hover
					opacity: 0.5

		& > div.year
			// **  All Resolutions
			margin-bottom: var(--gap)

			& > div.title
				// *  DEP: publications.sass div#publications_container > div.year > div.title-flex
				color: var(--GREY5)
				letter-spacing: 1px
				margin-bottom: var(--small_gap)

				font:
					family: OpenSansLight
					size: 25px
				line-height: 25px

			& > div.grid
				@include gridContainerMixin(img, true)

				& > div.row
					width: auto

			// **  min-width($BP4)
			@include min-width($BP4)
				border-left: 1px solid var(--GREY2)
				padding-left: 39px

			// **  max-width($BP4)
			@include max-width($BP4)

	div#img_viewer

		// 1340px
		@include min-width($BP1)
			--localHeight: 600px

		@include width-between($BP4, $BP1)
			--localHeight: 500px

		@include max-width($BP4)
			--localHeight: 400px


		display: flex


		height: var(--localHeight)
		// [min-width: $BP1]: -1 x ((800 / 2) + 60)  ==  -460px
		// [max-width: $BP1]: -1 x ((600 / 2) + 40)  ==  -340px
		margin:
			left: auto
			right: auto
			top: calc(var(--localHeight) / -2)

		opacity: 0
		position: fixed
		top: 50%

		transition: opacity 200ms
		width: var(--w)


		z-index: -1

		&.on
			opacity: 1
			z-index: 5

		--chevronWidth: 60px

		& > img
			@include min-width($BP4)
				max-height: var(--localHeight)
			//width: 100%
			//object-fit: contain
			@include max-width($BP4)
				//width: 75%
				width: calc(100% - 2 * var(--chevronWidth))
				object-fit: contain


		& > div#right_css_chevron, & > div#left_css_chevron
			display: flex
			margin: auto
			//width: $chevronWidth

			& > span.lines
				background: white
				height: 2px
				position: relative
				top: calc(var(--chevronWidth) / 1.5)
				transform-origin: center

				transition: transform 0.1s, box-shadow 0.1s
				width: calc(var(--chevronWidth) / 2)

				&:after
					background: white
					content: ""
					height: 100%
					position: absolute
					transition: transform 0.1s, bottom 0.1s, top 0.1s
					transform: rotate(90deg)
					bottom: calc((var(--chevronWidth) / 4))
					right: calc((var(--chevronWidth) / 4))
					width: 100%

			&.left
				padding-bottom: calc(var(--chevronWidth) / 2)

				& > span.lines
					transform: rotate(45deg)

			&.right
				// 7/6 = 1/2 + 1/1.5
				padding-bottom: calc((var(--chevronWidth) * 7 / 6))

				& > span.lines
					transform: rotate(225deg)

		& > div#caption
			@include min-width($BP4)
				@include fourWayTextShadow(1px, 1px, 0, black)
			text-align: center
			position: fixed
			font-size: 24px
			color: white
			top: 52%
			margin-top: calc(var(--localHeight) / 2)
			width: inherit

		& > div#right_chevron, & > div#left_chevron

			cursor: pointer
			filter: invert(1) drop-shadow(2px 4px 6px black)
			margin: auto
			opacity: 0.8
			transition: opacity 100ms, transform 50ms
			width: var(--chevronWidth)
			z-index: 5

			&:hover
				opacity: 1


			&.right
				margin: auto

				&:active
					& > svg
						transform: translateX(4px)

			&.left
				&:active
					& > svg
						transform: rotate(180deg) translateX(4px)

				& > svg
					transform: rotate(180deg)

	div#img_viewer_close_css
		height: var(--MOBILE_NAVBAR_HEIGHT)
		opacity: 0
		position: fixed
		right: 0px
		top: 0px
		transition: opacity 0.5s ease-in-out
		width: calc(var(--MOBILE_NAVBAR_HEIGHT) - 10px)
		z-index: 5
		pointer-events: none

		&.on
			opacity: 0.8
			cursor: pointer

			&:hover
				opacity: 1


		& > span.lines
			background: white
			height: 2px
			position: absolute
			top: calc(var(--MOBILE_NAVBAR_HEIGHT) / 2)
			transform-origin: center
			transform: rotate(45deg)
			width: calc(var(--MOBILE_NAVBAR_HEIGHT) / 2)


			&:after
				background: white
				bottom: 0px
				content: ""
				height: 100%
				position: absolute
				//transition: transform $_trans, bottom $_trans, top $_trans
				transform: rotate(90deg)
				width: 100%

		//&:before
			top: -10px
			opacity: 1

	div#img_viewer_close
		// **  --gap, --w, --tagWidth vars from mixins.sass
		position: fixed
		@include min-width($BP4)
			top: var(--gap)
		@include max-width($BP4)
			top: calc(var(--MOBILE_NAVBAR_HEIGHT) + var(--small_gap))
		right: var(--gap)
		opacity: 0
		transition: opacity 100ms

		&.on
			opacity: 0.8
			cursor: pointer

			&:hover
				opacity: 1

		& > svg
			display: block
			// *  DEP: gallery.ts imgViewerClose attr viewBox
			--dim: 32px
			width: var(--dim)
			height: var(--dim)


			& > path
				fill: none
				stroke-width: 4px
				stroke: white

				// *  DEP: svg --dim
				&.upright
					d: path("m 31 1 l -30 30")

				&.downleft
					d: path("m 1 1 l 30 30")
